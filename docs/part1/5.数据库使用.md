介绍中说的很明白，`Sanic` 是一个可以使用 `async/await` 语法编写项目的**异步**非阻塞框架，既然是异步框架，那么在使用过程中用到的第三方包也最好是异步的，比如http请求，最好就使用`aihttp`而非`requests`，对于数据库的连接，也是同样如此，下面我将用代码的形式来说明下如何在Sanic中连接数据库。

### 操作Mysql
对于mysql数据库的异步操作，我只在一些脚本中用过，用的是[aiomysql](https://github.com/aio-libs/aiomysql)，其中官方文档中讲得很清楚，也支持结合`sqlalchemy`编写`ORM`，然后aiomysql提供了自己编写的异步引擎。

``` python
from aiomysql.sa import create_engine
# 这个才是关键
```

下面我编写一个具体的例子来用异步语句操作下数据库，首先建立如下目录：

``` shel
aio_mysql
├── demo.py
├── model.py
└── requirements.txt
```

建立表：

``` mysql
create database test_mysql;

CREATE TABLE user
(
  id        INT AUTO_INCREMENT
    PRIMARY KEY,
  user_name VARCHAR(16) NOT NULL,
  pwd       VARCHAR(32) NOT NULL,
  real_name VARCHAR(6)  NOT NULL
);
```

一切准备就绪，下面编写代码：

``` python
# script: model.py
import sqlalchemy as sa

metadata = sa.MetaData()

user = sa.Table(
    'user',
    metadata,
    sa.Column('id', sa.Integer, autoincrement=True, primary_key=True),
    sa.Column('user_name', sa.String(16), nullable=False),
    sa.Column('pwd', sa.String(32), nullable=False),
    sa.Column('real_name', sa.String(6), nullable=False),
)

# script: demo.py
import asyncio

from aiomysql.sa import create_engine

from model import user,metadata


async def go(loop):
    """
    aiomysql项目地址：https://github.com/aio-libs/aiomysql
    :param loop:
    :return:
    """
    engine = await create_engine(user='root', db='test_mysql',
                                 host='127.0.0.1', password='123456', loop=loop)
    async with engine.acquire() as conn:
        await conn.execute(user.insert().values(user_name='user_name01', pwd='123456', real_name='real_name01'))
        await conn.execute('commit')

        async for row in conn.execute(user.select()):
            print(row.user_name, row.pwd)

    engine.close()
    await engine.wait_closed()


loop = asyncio.get_event_loop()
loop.run_until_complete(go(loop))

```
运行 python demo.py，会看到如下输出：

``` shell
user_name01 123456
```

很简单吧，具体示例见